<md:EntityDescriptor
    xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
    xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata"
    ID="{{ `{{ id }}` }}"
    entityID="{{ `{{ entity_id }}`}}"
    validUntil="{{ `{{ valid_until }}` }}">
    <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
            <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
            <ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
            <ds:Reference URI="#ONELOGIN_d867f48a102a7b5394af285db93952d4e4de769d">
                <ds:Transforms>
                    <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                    <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                </ds:Transforms>
                <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
                <ds:DigestValue></ds:DigestValue>
            </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue></ds:SignatureValue>
        <ds:KeyInfo>
            <ds:X509Data>
                <ds:X509Certificate>{{ `{{ spsso.cert }}` }}</ds:X509Certificate>
            </ds:X509Data>
        </ds:KeyInfo>
    </ds:Signature>
    <md:SPSSODescriptor AuthnRequestsSigned="true" WantAssertionsSigned="true" protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol">
        <md:KeyDescriptor use="signing">
            <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
                <ds:KeyName>{{ `{{ spsso.keyname }}` }}</ds:KeyName>
                <ds:X509Data>
                    <ds:X509Certificate>{{ `{{ spsso.cert }}` }}</ds:X509Certificate>
                </ds:X509Data>
            </ds:KeyInfo>
        </md:KeyDescriptor>
        <md:KeyDescriptor use="encryption">
            <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
                <ds:KeyName>{{ `{{ spsso.keyname }}` }}</ds:KeyName>
                <ds:X509Data>
                    <ds:X509Certificate>{{ `{{ spsso.cert }}` }}</ds:X509Certificate>
                </ds:X509Data>
            </ds:KeyInfo>
        </md:KeyDescriptor>
        <md:AssertionConsumerService index="1" Binding="{{ `{{ spsso.acs_binding }}` }}" Location="{{ `{{ spsso.acs_url }}` }}"/>
    </md:SPSSODescriptor>
    <md:Organization>
        {{- $organizations := keys .Values.max.config.saml.metaData.organization }}
        {{- range $index, $language := $organizations }}
        {{- $organization := get $.Values.max.config.saml.metaData.organization $language }}
        {{- if $index }},{{ end }}
        <md:OrganizationName xml:lang="{{ $language }}">{{ $organization.name }}</md:OrganizationName>
        <md:OrganizationDisplayName xml:lang="{{ $language }}">{{ $organization.displayName }}</md:OrganizationDisplayName>
        <md:OrganizationURL xml:lang="{{ $language }}">{{ $organization.url }}</md:OrganizationURL>
        {{- end }}
    </md:Organization>
    {{- $contacts := keys .Values.max.config.saml.metaData.contact }}
    {{- range $index, $contactType := $contacts }}
    {{- $contact := get $.Values.max.config.saml.metaData.contact $contactType }}
    {{- if $index }},{{ end }}
    <md:ContactPerson contactType="{{ $contactType }}">
        <md:GivenName>{{ $contact.givenName }}</md:GivenName>
        <md:EmailAddress>{{ $contact.emailAddress }}</md:EmailAddress>
    </md:ContactPerson>
    {{- end }}
</md:EntityDescriptor>
