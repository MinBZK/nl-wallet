# Use Case 3.3 Renew PID

## Overview

| Aspect                       | Description                                                                                                                                                                                                     |
|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Summary**                  | The user renews Person Identification Data (PID) by first authenticating themselves using DigiD (with ID card or driver's license),<br>checking the offered PID and entering their PIN to complete the process. |
| **Goal**                     | Renewing the Person Identification Data (PID).                                                                                                                                                                  |
| **Preconditions**            | *None*                                                                                                                                                                                                          |
| **Postconditions**           | <ul><li>Renewed PID is issued to and stored in the App.</li><li>The PID renewal event is added in the history.</li></ul>                                                                                        |
| **Triggered by**             | <ul><li>User selects 'Replace card via DigiD' in screen 'PID Card detail'</li></ul>                                                                                                                             |
| **Additional Documentation** | <ul><li>[Issuance](../../architecture/use-cases/issuance-with-openid4vci.md)</li></ul>                                                                                                                          |
| **Possible errors**          | <ul><li>[No Internet](../errors.md#no-internet)</li><li>[Server Unreachable](../errors.md#server-unreachable)</li><li>[Generic Error](../errors.md#generic-error)</li></ul>                                     |
| **Logical test cases**       | <ul><li>[LTC66 Renew PID](../logical-test-cases.md#ltc66)</li></ul>                                                                                                                                             |

---

## Flow

| #       | Description                                                                                                                                                                       | Next                                                                   |
|---------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
| **1**   | **PRIMARY SCENARIO**                                                                                                                                                              |                                                                        |
| **1.1** | **System displays screen 'Renew cards via DigiD'**<ul><li>Message: Use DigiD to prove who you are</li><li>Actions: Open the DigiD app, Go to DigiD website, Help, Close</li></ul> |                                                                        |
| 1.1a    | User selects Open the DigiD app                                                                                                                                                   | 1.2                                                                    |
| 1.1b    | User selects Go to DigiD website <br>&rarr; System opens DigiD website in browser and suspends app                                                                                |                                                                        |
| 1.1c    | User selects Help                                                                                                                                                                 | Show placeholder 'under construction'                                  |
| 1.1d    | User selects Close                                                                                                                                                                | 5                                                                      |
| **1.2** | **System awaits DigiD response and displays screen 'Continue with DigiD'**<ul><li>Message: Continue in DigiD app to get your data</li><li>Actions: Stop</li></ul>                 |                                                                        |
| 1.2a    | Event: DigiD returns control to System, authentication successful                                                                                                                 | 1.3                                                                    |
| 1.2b    | Event: DigiD returns control to System, authentication failed                                                                                                                     | 2                                                                      |
| 1.2c    | Event: DigiD returns control to System, login stopped or session expired                                                                                                          | 3                                                                      |
| 1.2d    | User selects Stop                                                                                                                                                                 | 4                                                                      |
| **1.3** | **System executes PID renewal until preview**<ul><li>Data is being retrieved</li><li>Actions: Stop</li><li>Duration: 0.1 - 1.5 seconds</li></ul>                                  |                                                                        |
| 1.3a    | Event: PID issuance completes successfully                                                                                                                                        | 1.4                                                                    |
| 1.3b    | Error: PID could not be issued successfully                                                                                                                                       | Error flow: [Generic](../errors.md#generic-error)                      |
| 1.3c    | Error: No internet                                                                                                                                                                | Error flow: [No Internet](../errors.md#no-internet)                    |
| 1.3d    | Error: Server unreachable                                                                                                                                                         | Error flow: [Server Unreachable](../errors.md#server-unreachable)      |
| **1.4** | **System displays screen 'Verify your data'**<ul><li>Message: Are your details correct?</li><li>Actions: Yes continue, No</li></ul>                                               |                                                                        |
| 1.4a    | User selects Yes, continue                                                                                                                                                        | 1.5                                                                    |
| 1.4b    | User selects No                                                                                                                                                                   | 6                                                                      |
| **1.5** | **System executes partial flow [PF2.4 Confirm a protected action](../partial-flows/PF2.4_ConfirmProtectedAction.md)**<ul><li>Not cancelable</li></ul>                             |                                                                        |
| 1.5a    | Result: Confirm                                                                                                                                                                   | 1.6                                                                    |
| 1.5b    | Result: Back                                                                                                                                                                      | 1.4                                                                    |
| **1.6** | **System executes rest of PID renewal**<ul><li>Duration: 0.1 - 1.5 seconds</li></ul>                                                                                              |                                                                        |
| 1.6a    | Event: PID issuance completes successfully                                                                                                                                        | 1.7                                                                    |
| 1.6b    | Error: No internet                                                                                                                                                                | Error flow: [No Internet](../errors.md#no-internet)                    |
| 1.6c    | Error: Server unreachable                                                                                                                                                         | Error flow: [Server Unreachable](../errors.md#server-unreachable)      |
| **1.7** | **System displays screen 'Cards replaced'**<ul><li>Message: You have replaced your PID</li><li>Actions: To my overview, Help</li></ul>                                            |                                                                        |
| 1.7a    | User selects To my overview                                                                                                                                                       | Go to: [UC7.1 Show all available cards](./UC7.1_ShowAllAvailableCards) |
| 1.7a    | User selects Help                                                                                                                                                                 | Show placeholder 'under construction'                                  |
| **2**   | **WHEN DIGID AUTHENTICATION FAILS**                                                                                                                                               |                                                                        |
| **2.1** | **System displays screen 'Login failed'**<ul><li>Message: Login again to get data</li><li>Actions: Login again, Go to DigiD website</li></ul>                                     |                                                                        |
| 2.1a    | User selects Login again                                                                                                                                                          | 1.2                                                                    |
| 2.2b    | User selects Go to DigiD website <br>&rarr; System opens DigiD website in browser and suspends app                                                                                |                                                                        |
| **3**   | **WHEN USER ABORTS DIGID OR EXPIRES**                                                                                                                                             |                                                                        |
| **3.1** | **System displays screen 'Login stopped'**<ul><li>Message: To continue login again</li><li>Actions: Login again, Go to DigiD website</li></ul>                                    |                                                                        |
| 3.1a    | User selects Login again                                                                                                                                                          | Back                                                                   |
| 3.1b    | User selects Go to DigiD website                                                                                                                                                  |                                                                        |
| **4**   | **WHEN USER ABORTS DIGID FROM APP**                                                                                                                                               |                                                                        |
| **4.1** | **System displays prompt 'Are you sure?'**<ul><li>Actions: Back, Stop Login</li></ul>                                                                                             |                                                                        |
| 4.1a    | User selects Back                                                                                                                                                                 | Back                                                                   |
| 4.1b    | User selects Stop Login                                                                                                                                                           | 4.2                                                                    |
| **4.2** | **System displays screen 'Login stopped'**<ul><li>Actions: Login again, Go to DigiD website</li></ul>                                                                             |                                                                        |
| 4.2a    | User selects Login again                                                                                                                                                          | 1.2                                                                    |
| 4.2b    | User selects Go to DigiD website <br>&rarr; System opens browser and suspends app                                                                                                 |                                                                        |
| **5**   | **WHEN USER STOPS RENEWAL**                                                                                                                                                       |                                                                        |
| **5.1** | **System displays bottom sheet 'Are you sure you want to stop?'**<ul><li>Actions: Yes stop, No</li></ul>                                                                          |                                                                        |
| 5.1a    | User selects Yes stop                                                                                                                                                             | 2.2                                                                    |
| 5.1b    | User selects No                                                                                                                                                                   | Back                                                                   |
| **5.2** | **System displays screen 'Stopped'**<ul><li>Message: You have stopped</li><li>Actions: Close, Help</li></ul>                                                                      |                                                                        |
| 5.2a    | User selects Close                                                                                                                                                                | Go to: [UC7.2 Show card details](UC7.2_ShowCardDetails.md)             |
| 5.2b    | User selects Help                                                                                                                                                                 | Show placeholder 'under construction'                                  |
| **6**   | **WHEN USER REJECTS RENEWED PID**                                                                                                                                                 |                                                                        |
| **6.1** | **System displays screen 'Are your details incorrect?'**<ul><li>Message: Incorrect details can cause problems</li><li>Actions: Do not add details, Back</li></ul>                 |                                                                        |
| 6.1a    | User selects Do not add details                                                                                                                                                   | 6.2                                                                    |
| 6.1b    | User selects Back                                                                                                                                                                 | Back                                                                   |

