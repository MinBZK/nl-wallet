# Use Case 9.9 Scan QR

## Overview

| Aspect                       | Description                                                                                                                                                                                                                                                                                          |
|------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Summary**                  | The user scans a QR offered on a third party website, to initiate a sharing or issuance session.                                                                                                                                                                                                     |
| **Goal**                     | Starting a sharing or issuing session.                                                                                                                                                                                                                                                               |
| **Preconditions**            | *None*                                                                                                                                                                                                                                                                                               |
| **Postconditions**           | *None*                                                                                                                                                                                                                                                                                               |
| **Triggered by**             | <ul><li>User selects 'Scan QR' in [UC9.1 Show app menu](UC9.1_ShowAppMenu.md)</li><li>User selects 'Scan QR' in [UC7.1 Show all available cards](UC7.1_ShowAllAvailableCards.md)</li></ul>                                                                                                           |
| **Additional documentation** | *None*                                                                                                                                                                                                                                                                                               |
| **Possible errors**          | <ul><li>Generic</li><li>Session expired</ul></li>                                                                                                                                                                                                                                                    |
| **Logical test cases**       | <ul><li>[LTC6 Invalid universal link](../logical-test-cases.md#ltc6)</li><li>[LTC7 cross-device generic issuance](../logical-test-cases.md#ltc7)</li><li>[LTC18 cross-device share data](../logical-test-cases.md#ltc18)</li><li>[LTC24 cross-device login](../logical-test-cases.md#ltc24)</li></ul> |

---

## Flow

| #       | Description                                                                                                           | Next                                                                                |
| ------- | --------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------- |
| **1**   | **PRIMARY SCENARIO**                                                                                                  |                                                                                     |
| **1.1** | **System determines whether camera permissions were granted**                                                         |                                                                                     |
| 1.1a    | Case: Camera permissions are granted                                                                                  | 1.3                                                                                 |
| 1.1b    | Case: Camera permissions are not granted                                                                              | 1.2                                                                                 |
| **1.2** | **System asks permission to use device camera**                                                                       |                                                                                     |
| 1.2a    | User grants permission                                                                                                | 1.3                                                                                 |
| 1.2b    | User rejects permission                                                                                               | 2                                                                                   |
| **1.3** | **System displays page 'Scan QR'**<ul><li>Camera view</li><li>Actions: Toggle Flashlight, Back, Help</li></ul>        |                                                                                     |
| 1.3a    | User scans QR                                                                                                         | 1.4                                                                                 |
| 1.3b    | User selects Back                                                                                                     | Back                                                                                |
| 1.3c    | User selects Help                                                                                                     | Show placeholder 'under construction'                                           |
| 1.3d    | User selects Toggle Flashlight <br>&rarr; Flashlight turns on/off                                                     |                                                                                     |
| **1.4** | **System validates QR**                                                                                               |                                                                                     |
| 1.4a    | Case: QR is valid                                                                                                     | 1.5                                                                                 |
| 1.4b    | Case: QR is invalid                                                                                                   | 3                                                                                   |
| **1.5** | **System resolves QR**<ul><li>Contacts the URL provided in the QR</li><li>Duration: 0.0 - 0.1 seconds</li></ul>       |                                                                                     |
| 1.5a    | Case: QR resolves to issuance flow                                                                                    | Go to: [UC4.1 Obtain cards](UC4.1_ObtainCardsFromEAAIssuer.md)                      |
| 1.5b    | Case: QR resolves to sharing flow                                                                                     | Go to: [UC5.1 Share data](UC5.1_ShareDataWithRP.md)                                 |
| 1.5c    | Case: QR resolves to login flow                                                                                       | Go to: [UC5.2 Log in to Relying Party application](UC5.2_LoginToApplicationOfRP.md) |
| **2**   | **WHEN NO CAMERA PERMISSION**                                                                                         |                                                                                     |
| **2.1** | **System displays screen 'Camera permission required'**<ul><li>Actions: Grant Camera Permission, Back, Help</li></ul> |                                                                                     |
| 2.1a    | User selects Back                                                                                                     | Back                                                                                |
| 2.1b    | User selects Help                                                                                                     | Show placeholder 'under construction'                                           |
| 2.1c    | User selects Grant Camera Permission                                                                                  | 1.2                                                                                 |
| **3**   | **WHEN QR INVALID**                                                                                                   |                                                                                     |
| **3.1** | **System displays prompt 'Invalid QR'**<ul><li>Actions: OK</li></ul>                                                  |                                                                                     |
| 3.1a    | User selects OK                                                                                                       | 1.3                                                                                 |