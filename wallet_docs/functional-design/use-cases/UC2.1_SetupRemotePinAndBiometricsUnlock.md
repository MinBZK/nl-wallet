# Use Case 2.1 Setup a remote PIN and biometric unlock

## Overview

| Aspect                       | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ---------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Summary**                  | The user chooses and confirms a secure 6-digit remote Personal Identification Number (PIN) for the app, and enables biometric unlock if supported and desired.                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Goal**                     | Securing the App with PIN and optionally biometrics.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Preconditions**            | *None*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **Postconditions**           | <ul><li>Remote PIN is configured.</li><li>If selected, biometric unlock is configured.</ul></li>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **Triggered by**             | <ul><li>User completes [UC1.1 Introduce the app](UC1.1_IntroduceTheApp.md)</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **Additional Documentation** | <ul><li>[Wallet creation](../../architecture/use-cases/wallet-creation)</ul></li>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Possible errors**          | <ul><li>No internet</li><li>Server unreachable</li><li>Device incompatible</ul></li>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Logical Test Cases**       | <ul><li>[LTC61 PIN entries do not match, try again](../logical-test-cases.md#ltc61)</li><li>[LTC62 PIN entries do not match, choose new PIN](../logical-test-cases.md#ltc62)</li><li>[LTC63 PIN entry does not conform to policy](../logical-test-cases.md#ltc63)</li><li>[LTC66 Setup PIN Happy flow](../logical-test-cases.md#ltc66)</li><li>[LTC67 Setup PIN fails device does not pass app and key attestation](../logical-test-cases.md#ltc67)</li><li>[LTC74 User skips setting up biometrics](../logical-test-cases.md#ltc74)</li><li>[LTC75 Device does not support biometrics](../logical-test-cases.md#ltc75)</li></ul> |

---

## Flow

| #       | Description                                                                                                                                                             | Next                                                           |
| ------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------- |
| **1**   | **PRIMARY SCENARIO**                                                                                                                                                    |                                                                |
| **1.1** | **System displays screen 'Choose PIN'**<ul><li>Input: 6 digits (0-9) PIN field, in-app keyboard</li><li>Actions: Back, Info</li></ul>                                   |                                                                |
| 1.1a    | User enters PIN                                                                                                                                                         | 1.2                                                            |
| 1.1b    | User selects Back                                                                                                                                                       | Back                                                           |
| 1.1c    | User selects Info                                                                                                                                                       | Go to: [UC9.2 Get app information](UC9.2_GetAppInformation.md) |
| **1.2** | **System validates entered PIN satisfies PIN policy**<ul><li>Duration: 0.0 - 0.1 seconds</li></ul>                                                                      |                                                                |
| 1.2a    | Case: PIN matches PIN policy                                                                                                                                            | 1.3                                                            |
| 1.2b    | Case: PIN does not match PIN policy                                                                                                                                     | 2                                                              |
| **1.3** | **System displays screen 'Repeat PIN'**<ul><li>Input: 6 digits (0-9) PIN field, in-app keyboard</li><li>Actions: Back, Info</li></ul>                                   |                                                                |
| 1.3a    | User enters PIN                                                                                                                                                         | 1.4                                                            |
| 1.3b    | User selects Back                                                                                                                                                       | Back                                                           |
| 1.3c    | User selects Info                                                                                                                                                       | Go to: [UC9.2 Get app information](UC9.2_GetAppInformation.md) |
| **1.4** | **System validates PINs match, displays loading message**<ul><li>Duration: 0.0 - 0.1 seconds</li></ul>                                                                  |                                                                |
| 1.4a    | Case: PINs match                                                                                                                                                        | 1.5                                                            |
| 1.4b    | Case: PINs do not match (first time)                                                                                                                                    | 3                                                              |
| 1.4c    | Case: PINs do not match (second time)                                                                                                                                   | 4                                                              |
| **1.5** | **System executes account setup, displays loading message**<ul><li>Duration: 0.0 - 1.0 seconds</li></ul>                                                                |                                                                |
| 1.5a    | Case: Account setup succeeds                                                                                                                                            | 1.6                                                            |
| 1.5b    | Error: Device insecure                                                                                                                                                  | Error flow: Device insecure                                    |
| 1.5c    | Error: No internet                                                                                                                                                      | Error flow: No internet                                        |
| 1.5d    | Error: Server unreachable                                                                                                                                               | Error flow: Server unreachable                                 |
| **1.6** | **System determines whether device supports biometrics**<ul><li>Duration: 0.0 - 0.1 seconds</li></ul>                                                                   |                                                                |
| 1.6a    | Case: Device supports biometrics                                                                                                                                        | 1.7                                                            |
| 1.6b    | Case: Device does not support biometrics                                                                                                                                | 1.9                                                            |
| **1.7** | **System displays screen 'Configure Biometrics'**<ul><li>Message: Do you want to unlock the app with Face ID/Fingerprint?</li><li>Actions: Enable, Skip, Info</li></ul> |                                                                |
| 1.7a    | User selects Enable                                                                                                                                                     | 1.9                                                            |
| 1.7b    | User selects Skip                                                                                                                                                       | 1.9                                                            |
| 1.7c    | User selects Info                                                                                                                                                       | Go to: [UC9.2 Get app information](UC9.2_GetAppInformation.md) |
| **1.8** | **Operating system prompts user for biometric authentication**                                                                                                          |                                                                |
| 1.8a    | User confirms with biometric authentication                                                                                                                             | 1.9                                                            |
| 1.8b    | User rejects biometric authentication                                                                                                                                   | 1.7                                                            |
| **1.9** | **System displays screen 'Confirm PIN/biometric setup'**<ul><li>Message: Your NL Wallet is secured</li><li>Actions: Next</li></ul>                                      |                                                                |
| 1.9a    | User selects Next                                                                                                                                                       | Go to: [UC3.1 Obtain PID](UC3.1_ObtainPidFromProvider.md)      |
| **2**   | **WHEN PIN DOES NOT SATISFY POLICY (TOO SIMPLE)**                                                                                                                       |                                                                |
| **2.1** | **System displays prompt 'PIN too simple'**<ul><li>Actions: OK</li></ul>                                                                                                |                                                                |
| 2.1a    | User selects OK                                                                                                                                                         | 1.3                                                            |
| **3**   | **WHEN PINs ARE NOT EQUAL (FIRST TIME)**                                                                                                                                |                                                                |
| **3.1** | **System displays prompt 'PIN is different, retry'**<ul><li>Actions: Try again</li></ul>                                                                                |                                                                |
| 3.1a    | User selects Try again                                                                                                                                                  | 1.3                                                            |
| **4**   | **WHEN PINs ARE NOT EQUAL (SECOND TIME)**                                                                                                                               |                                                                |
| **4.1** | **System displays prompt 'PIN is different, start over'**<ul><li>Actions: Start over</li></ul>                                                                          |                                                                |
| 4.1a    | User selects Start over                                                                                                                                                 | 1.1                                                            |